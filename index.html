<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Rock, Paper, Scissors!</title>
    </head>
    <body>
        <p>Press F12, go to console, and enter game() to start the game!</p>
        <script>
            const GAME_RULES = [
                {
                    'name': 'Rock',
                    'winsAgainst': 'Scissors',
                    'losesTo': 'Paper',
                },
                {
                    'name': 'Paper',
                    'winsAgainst': 'Rock',
                    'losesTo': 'Scissors',
                },
                {
                    'name': 'Scissors',
                    'winsAgainst': 'Paper',
                    'losesTo': 'Scissors',
                },
            ]
            function computerPlay() {
                const randomNumber = Math.random().toFixed(2);
                if (randomNumber <= 0.33) {
                    return 'Rock';
                }
                else if (randomNumber > 0.33 && randomNumber <= 0.66) {
                    return 'Paper';
                }
                else {
                    return 'Scissors';
                }
            }
            function capitalize(str) {
                return str.charAt(0).toUpperCase() + str.substr(1, str.length).toLowerCase();
            }
            function playRound(playerSelection, computerSelection) {
                const formattedPlayerSelection = capitalize(playerSelection);
                for (let i = 0; i < GAME_RULES.length; i++) {
                    if (formattedPlayerSelection === GAME_RULES[i].name) {
                        if (computerSelection === GAME_RULES[i]['winsAgainst']) {
                            return `You win! ${formattedPlayerSelection} beats ${computerSelection}.`;
                        }
                        else if (computerSelection === GAME_RULES[i]['losesTo']) {
                            return `You lose! ${computerSelection} beats ${formattedPlayerSelection}.`;
                        }
                        else {
                            return `It\'s a draw! ${formattedPlayerSelection} and ${computerSelection} destroy each other!`;
                        }
                    }
                }
                return ('You entered something other than Rock, Paper, and Scissors. Please choose from these given options only!');
            }
            function game() {
                let playerWinCount = 0;
                let computerWinCount = 0;
                for (let i = 0; i < 5; i++) {
                    let playerChoice = prompt('Rock, Paper, or Scissors?!');
                    let computerChoice = computerPlay();
                    let result = playRound(playerChoice, computerChoice);
                    if (result.includes('win')) {
                        playerWinCount++;
                    }
                    else if(result.includes('lose')) {
                        computerWinCount++;
                    }
                    console.log(result); 
                }
                let completeResult = `You won ${playerWinCount} out of 5 games, while the computer won ${computerWinCount}.`;
                if (playerWinCount > computerWinCount) {
                    console.log(completeResult + ` Congrats!`);
                }
                else if (playerWinCount < computerWinCount) {
                    console.log(completeResult + 'Better luck next time');
                }
                if (computerWinCount + playerWinCount != 5) {
                    console.log(`${5 - playerWinCount - computerWinCount} game(s) were drawn!`);
                }                
            }
        </script>
    </body>
</html>